
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo: Mestre da Carga | BeeWay</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
  <style>
    :root {
        --game-bg: #f8f9fa;
        --game-border: #dee2e6;
        --game-shadow: rgba(0,0,0,0.07);
        --game-dark-blue: #1D3557;
        --item-color-1: #e76f51;
        --item-color-2: #f4a261;
        --item-color-3: #e9c46a;
        --item-color-4: #2a9d8f;
        --item-color-5: #264653;
    }

    .packing-game-wrapper {
        background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        margin-top: 40px;
        text-align: center;
    }

    .game-screen { display: none; animation: fadeIn 0.5s ease-in-out; }
    .game-screen.active { display: block; }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .game-title h2 { font-size: 2rem; margin-bottom: 10px; }
    .game-title p, #start-screen p { color: var(--secondary-text); max-width: 600px; margin: 0 auto 30px; }

    .game-button {
      background-color: var(--primary-yellow);
      color: var(--dark-text); font-weight: 600; padding: 15px 30px; border-radius: 50px;
      display: inline-flex; align-items: center; gap: 10px; transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 183, 3, 0.4); border: none; cursor: pointer; font-size: 1.1rem;
    }
    .game-button:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(255, 183, 3, 0.5); }
    .end-buttons { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }

    #game-layout { display: flex; gap: 20px; margin-top: 20px; text-align: left; }
    #game-controls { flex: 1; }
    #truck-container { flex: 2; }

    #truck-grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(8, 1fr);
        width: 100%;
        aspect-ratio: 12 / 8;
        background-color: #fff;
        border: 2px solid var(--game-dark-blue);
        border-radius: 8px;
        box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
    }
    .grid-cell { background-color: transparent; }
    .grid-cell.occupied { background-color: var(--game-border); }

    .item-queue-container h3, #stats-container h3 { font-size: 1.3rem; margin-bottom: 15px; }
    #item-queue {
        background-color: #fff; padding: 15px; border-radius: 8px;
        min-height: 100px; display: flex; flex-direction: column; align-items: center; gap: 10px;
    }
    .pack-item {
        border: 2px solid var(--dark-text);
        cursor: grab;
        display: flex; justify-content: center; align-items: center;
        font-weight: 600;
        color: #fff;
        text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }
    .pack-item.dragging { opacity: 0.5; }

    .item-1x2 { width: calc(1 * (100%/2)); height: calc(2 * (100%/3)); background-color: var(--item-color-1); }
    .item-2x2 { width: calc(2 * (100%/2)); height: calc(2 * (100%/3)); background-color: var(--item-color-2); }
    .item-3x2 { width: calc(3 * (100%/2)); height: calc(3 * (100%/3)); background-color: var(--item-color-3); }
    .item-2x3 { width: calc(2 * (100%/2)); height: calc(3 * (100%/3)); background-color: var(--item-color-4); }
    .item-4x1 { width: calc(4 * (100%/2)); height: calc(1 * (100%/3)); background-color: var(--item-color-5); }

    .placed-item { position: absolute; border: 2px solid rgba(0,0,0,0.5); }
    
    #end-screen h3 { font-size: 1.8rem; margin-bottom: 15px; }
    #final-results p { font-size: 1.2rem; margin-bottom: 10px; }
    #final-results strong { font-size: 1.5rem; }
    .educational-note {
        margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--game-border);
        font-style: italic; color: var(--secondary-text);
    }

    @media (max-width: 768px) {
        #game-layout { flex-direction: column; }
        .packing-game-wrapper { padding: 20px; }
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="container">
      <a href="index.html" class="logo-container">
        <svg class="logo-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M50 5L95.5 27.5V72.5L50 95L4.5 72.5V27.5L50 5Z" fill="#FFB703"/><path d="M50 5L4.5 27.5V72.5L50 95L95.5 72.5V27.5L50 5Z" stroke="#212529" strokeWidth="4"/><path d="M50 50L4.5 27.5" stroke="#212529" strokeWidth="4"/><path d="M50 50L50 5" stroke="#212529" strokeWidth="4"/><path d="M50 50L95.5 27.5" stroke="#212529" strokeWidth="4"/></svg>
        <div class="logo-text"> <h1>BeeWay</h1> </div>
      </a>
      <button class="mobile-menu-toggle" aria-label="Abrir menu" aria-expanded="false" aria-controls="mainNav"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
      <nav class="main-nav" id="mainNav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="conteudos.html" class="nav-link">Conte√∫dos</a>
        <a href="jogos.html" class="nav-link active">Jogos</a>
        <a href="sobre.html" class="nav-link">Sobre n√≥s</a>
        <a href="recebimento-materiais.html" class="nav-link">Recebimento</a>
        <a href="contato.html" class="nav-link">Contato</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="container article-page" style="padding-top: 40px;">
      <div class="packing-game-wrapper">

        <div id="start-screen" class="game-screen active">
            <div class="game-title">
                <h2>Mestre da Carga</h2>
                <p>Sua miss√£o √© carregar o caminh√£o com o m√°ximo de efici√™ncia. Arraste as caixas para dentro do cont√™iner, tentando n√£o deixar espa√ßos vazios. Bom trabalho!</p>
            </div>
            <button id="start-button" class="game-button">Come√ßar a Carregar!</button>
        </div>

        <div id="game-play-screen" class="game-screen">
            <div id="game-layout">
                <div id="game-controls">
                    <div id="stats-container">
                        <h3>Status</h3>
                        <p>Efici√™ncia: <strong id="efficiency-value">0%</strong></p>
                    </div>
                    <div class="item-queue-container">
                        <h3>Pr√≥ximas Caixas</h3>
                        <p style="font-size: 0.9em; color: var(--secondary-text); margin-top: -10px; margin-bottom: 10px;">Clique com o bot√£o direito para girar</p>
                        <div id="item-queue"></div>
                    </div>
                </div>
                <div id="truck-container">
                    <div id="truck-grid" style="position: relative;"></div>
                </div>
            </div>
        </div>
        
        <div id="end-screen" class="game-screen">
            <h3>Carga Completa!</h3>
            <div id="final-results">
                <p>Efici√™ncia Final da Carga: <strong id="final-efficiency">0%</strong></p>
            </div>
            <div class="educational-note">
                <p>Na log√≠stica, um bom planejamento de carga (load planning) maximiza a capacidade do ve√≠culo, reduzindo o n√∫mero de viagens, economizando combust√≠vel e diminuindo custos.</p>
            </div>
            <div class="end-buttons">
                <button id="replay-button" class="game-button">üîÅ Jogar Novamente</button>
                <a href="jogos.html" class="game-button">‚¨ÖÔ∏è Voltar ao Menu</a>
            </div>
        </div>

      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2024 BeeWay ‚Äî Simplificando a log√≠stica para voc√™.</p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.querySelector('.mobile-menu-toggle');
        const mainNav = document.getElementById('mainNav');
        if (menuToggle && mainNav) {
            menuToggle.addEventListener('click', () => { /* ... */ });
        }
        
        // --- GAME LOGIC ---
        const GRID_COLS = 12;
        const GRID_ROWS = 8;

        const startScreen = document.getElementById('start-screen');
        const gamePlayScreen = document.getElementById('game-play-screen');
        const endScreen = document.getElementById('end-screen');
        const startButton = document.getElementById('start-button');
        const replayButton = document.getElementById('replay-button');

        const truckGrid = document.getElementById('truck-grid');
        const itemQueue = document.getElementById('item-queue');
        const efficiencyValue = document.getElementById('efficiency-value');
        const finalEfficiency = document.getElementById('final-efficiency');

        let gridState = [];
        let itemsToPlace = [];
        let draggedItem = null;

        const ITEM_DEFINITIONS = [
            { w: 2, h: 2, color: 'var(--item-color-1)' }, { w: 3, h: 2, color: 'var(--item-color-2)' },
            { w: 1, h: 4, color: 'var(--item-color-3)' }, { w: 2, h: 3, color: 'var(--item-color-4)' },
            { w: 4, h: 2, color: 'var(--item-color-5)' }, { w: 1, h: 3, color: 'var(--item-color-1)' },
            { w: 3, h: 3, color: 'var(--item-color-2)' },
        ];

        function switchScreen(screen) {
            document.querySelectorAll('.game-screen').forEach(s => s.classList.remove('active'));
            screen.classList.add('active');
        }

        function startGame() {
            initGrid();
            generateItems();
            updateQueue();
            updateStats();
            switchScreen(gamePlayScreen);
        }

        function initGrid() {
            truckGrid.innerHTML = '';
            gridState = Array(GRID_ROWS).fill(null).map(() => Array(GRID_COLS).fill(0));
            truckGrid.style.gridTemplateColumns = `repeat(${GRID_COLS}, 1fr)`;
            truckGrid.style.gridTemplateRows = `repeat(${GRID_ROWS}, 1fr)`;
        }

        function generateItems() {
            itemsToPlace = [...ITEM_DEFINITIONS].sort(() => Math.random() - 0.5);
        }

        function updateQueue() {
            itemQueue.innerHTML = '';
            if (itemsToPlace.length > 0) {
                const itemData = itemsToPlace[0];
                const itemEl = createItemElement(itemData);
                itemQueue.appendChild(itemEl);
            } else {
                endGame();
            }
        }
        
        function createItemElement(itemData) {
            const itemEl = document.createElement('div');
            itemEl.className = 'pack-item';
            itemEl.draggable = true;
            itemEl.style.width = `${itemData.w * 25}px`;
            itemEl.style.height = `${itemData.h * 25}px`;
            itemEl.style.backgroundColor = itemData.color;
            itemEl.dataset.w = itemData.w;
            itemEl.dataset.h = itemData.h;
            itemEl.dataset.color = itemData.color;
            
            itemEl.addEventListener('dragstart', handleDragStart);
            itemEl.addEventListener('dragend', handleDragEnd);
            itemEl.addEventListener('contextmenu', handleRotate);
            return itemEl;
        }

        function handleRotate(e) {
            e.preventDefault();
            const w = e.target.dataset.w;
            e.target.dataset.w = e.target.dataset.h;
            e.target.dataset.h = w;
            e.target.style.width = `${e.target.dataset.w * 25}px`;
            e.target.style.height = `${e.target.dataset.h * 25}px`;
        }

        function handleDragStart(e) {
            draggedItem = {
                w: parseInt(e.target.dataset.w),
                h: parseInt(e.target.dataset.h),
                color: e.target.dataset.color,
                element: e.target
            };
            setTimeout(() => e.target.classList.add('dragging'), 0);
        }
        
        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }
        
        truckGrid.addEventListener('dragover', e => e.preventDefault());
        
        truckGrid.addEventListener('drop', handleDrop);

        function handleDrop(e) {
            e.preventDefault();
            const rect = truckGrid.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const cellWidth = rect.width / GRID_COLS;
            const cellHeight = rect.height / GRID_ROWS;
            
            const col = Math.floor(x / cellWidth);
            const row = Math.floor(y / cellHeight);

            if (canPlace(row, col, draggedItem.h, draggedItem.w)) {
                placeItem(row, col, draggedItem.h, draggedItem.w, draggedItem.color);
                itemsToPlace.shift();
                updateQueue();
                updateStats();
            }
        }
        
        function canPlace(startRow, startCol, h, w) {
            if (startRow + h > GRID_ROWS || startCol + w > GRID_COLS) return false;
            for (let r = 0; r < h; r++) {
                for (let c = 0; c < w; c++) {
                    if (gridState[startRow + r][startCol + c] === 1) return false;
                }
            }
            return true;
        }

        function placeItem(startRow, startCol, h, w, color) {
            for (let r = 0; r < h; r++) {
                for (let c = 0; c < w; c++) {
                    gridState[startRow + r][startCol + c] = 1;
                }
            }
            const placedEl = document.createElement('div');
            placedEl.className = 'placed-item';
            placedEl.style.position = 'absolute';
            placedEl.style.top = `${(startRow / GRID_ROWS) * 100}%`;
            placedEl.style.left = `${(startCol / GRID_COLS) * 100}%`;
            placedEl.style.height = `${(h / GRID_ROWS) * 100}%`;
            placedEl.style.width = `${(w / GRID_COLS) * 100}%`;
            placedEl.style.backgroundColor = color;
            truckGrid.appendChild(placedEl);
        }
        
        function updateStats() {
            const totalCells = GRID_COLS * GRID_ROWS;
            const occupiedCells = gridState.flat().reduce((sum, cell) => sum + cell, 0);
            const efficiency = totalCells > 0 ? (occupiedCells / totalCells) * 100 : 0;
            efficiencyValue.textContent = `${efficiency.toFixed(1)}%`;
        }

        function endGame() {
            const totalCells = GRID_COLS * GRID_ROWS;
            const occupiedCells = gridState.flat().reduce((sum, cell) => sum + cell, 0);
            const efficiency = totalCells > 0 ? (occupiedCells / totalCells) * 100 : 0;
            finalEfficiency.textContent = `${efficiency.toFixed(1)}%`;
            switchScreen(endScreen);
        }

        startButton.addEventListener('click', startGame);
        replayButton.addEventListener('click', startGame);
    });
  </script>

</body>
</html>
